{"ast":null,"code":"var _jsxFileName = \"/Users/jay/Desktop/Coding/ManagementSystem/my-app/Frontend/src/Components/AdminSubPages/Recipe.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport RecipeForm from \"./RecipeComponents/RecipeForm\";\nimport RecipeTable from \"./RecipeComponents/RecipeTable\";\nimport API from \"../../API/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Recipe() {\n  _s();\n  const [recipes, setRecipes] = useState([]);\n  const [inventoryList, setInventoryList] = useState([]);\n  const [editingId, setEditingId] = useState(null);\n  const [editedRecipe, setEditedRecipe] = useState(null);\n  const fetchRecipe = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const res = await API.get(\"/recipe/getList\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setRecipes(res.data);\n    } catch (error) {\n      console.log(\"Failed to load Recipe List\", error);\n    }\n  };\n  const fetchInventory = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const res = await API.get(\"/inventory/inventoryList\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setInventoryList(res.data);\n    } catch (error) {\n      console.log(\"Failed to load InventoryList\", error);\n    }\n  };\n  useEffect(() => {\n    fetchRecipe();\n    fetchInventory();\n  }, []);\n  const handleSubmit = async (e, recipeData) => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem(\"token\");\n      const selectedIngredients = recipeData.ingredients.filter(ing => ing.inventoryItem);\n      const costOfGood = selectedIngredients.reduce((sum, ing) => {\n        var _ing$inventoryItem;\n        const unitPrice = ((_ing$inventoryItem = ing.inventoryItem) === null || _ing$inventoryItem === void 0 ? void 0 : _ing$inventoryItem.unitPrice) || 0;\n        const volume = parseFloat(ing.volume) || 0;\n        return sum + unitPrice * volume;\n      }, 0);\n      const margin = recipeData.retailPrice > 0 ? (recipeData.retailPrice - costOfGood) / recipeData.retailPrice : 0;\n      const payload = {\n        name: recipeData.name,\n        retailPrice: parseFloat(recipeData.retailPrice),\n        ingredients: selectedIngredients.map(ing => ({\n          inventoryItem: ing.inventoryItem._id,\n          volume: ing.volume\n        })),\n        costOfGood,\n        margin\n      };\n      await API.post(\"/recipe/addRecipe\", payload, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      console.log(payload);\n      await fetchRecipe();\n    } catch (err) {\n      console.error(\"Failed to add recipe\", err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 max-w-5xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold mb-6 text-center\",\n      children: \"Recipe Manager\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RecipeForm, {\n      handleSubmit: handleSubmit,\n      ingredientsList: inventoryList\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RecipeTable, {\n      recipes: recipes,\n      editingId: editingId,\n      setEditingId: setEditingId,\n      editedRecipe: editedRecipe,\n      setEditedRecipe: setEditedRecipe,\n      fetchRecipe: fetchRecipe,\n      ingredientsList: inventoryList\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}\n_s(Recipe, \"48lRvV0xuymJjVlR2FtY5wr6aNA=\");\n_c = Recipe;\nvar _c;\n$RefreshReg$(_c, \"Recipe\");","map":{"version":3,"names":["React","useEffect","useState","RecipeForm","RecipeTable","API","jsxDEV","_jsxDEV","Recipe","_s","recipes","setRecipes","inventoryList","setInventoryList","editingId","setEditingId","editedRecipe","setEditedRecipe","fetchRecipe","token","localStorage","getItem","res","get","headers","Authorization","data","error","console","log","fetchInventory","handleSubmit","e","recipeData","preventDefault","selectedIngredients","ingredients","filter","ing","inventoryItem","costOfGood","reduce","sum","_ing$inventoryItem","unitPrice","volume","parseFloat","margin","retailPrice","payload","name","map","_id","post","err","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ingredientsList","_c","$RefreshReg$"],"sources":["/Users/jay/Desktop/Coding/ManagementSystem/my-app/Frontend/src/Components/AdminSubPages/Recipe.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport RecipeForm from \"./RecipeComponents/RecipeForm\";\nimport RecipeTable from \"./RecipeComponents/RecipeTable\";\nimport API from \"../../API/api\";\n\nexport default function Recipe() {\n  const [recipes, setRecipes] = useState([]);\n  const [inventoryList, setInventoryList] = useState([]);\n  const [editingId, setEditingId] = useState(null);\n  const [editedRecipe, setEditedRecipe] = useState(null);\n\n  const fetchRecipe = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const res = await API.get(\"/recipe/getList\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setRecipes(res.data);\n    } catch (error) {\n      console.log(\"Failed to load Recipe List\", error);\n    }\n  };\n  const fetchInventory = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const res = await API.get(\"/inventory/inventoryList\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      setInventoryList(res.data);\n    } catch (error) {\n      console.log(\"Failed to load InventoryList\", error);\n    }\n  };\n  useEffect(() => {\n    fetchRecipe();\n    fetchInventory();\n  }, []);\n  const handleSubmit = async (e, recipeData) => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem(\"token\");\n\n      const selectedIngredients = recipeData.ingredients.filter(\n        (ing) => ing.inventoryItem\n      );\n\n      const costOfGood = selectedIngredients.reduce((sum, ing) => {\n        const unitPrice = ing.inventoryItem?.unitPrice || 0;\n        const volume = parseFloat(ing.volume) || 0;\n        return sum + unitPrice * volume;\n      }, 0);\n\n      const margin =\n        recipeData.retailPrice > 0\n          ? (recipeData.retailPrice - costOfGood) / recipeData.retailPrice\n          : 0;\n\n      const payload = {\n        name: recipeData.name,\n        retailPrice: parseFloat(recipeData.retailPrice),\n        ingredients: selectedIngredients.map((ing) => ({\n          inventoryItem: ing.inventoryItem._id,\n          volume: ing.volume,\n        })),\n        costOfGood,\n        margin,\n      };\n\n      await API.post(\"/recipe/addRecipe\", payload, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n\n      console.log(payload);\n      await fetchRecipe();\n    } catch (err) {\n      console.error(\"Failed to add recipe\", err);\n    }\n  };\n\n  return (\n    <div className=\"p-6 max-w-5xl mx-auto\">\n      <h2 className=\"text-3xl font-bold mb-6 text-center\">Recipe Manager</h2>\n      <RecipeForm handleSubmit={handleSubmit} ingredientsList={inventoryList} />\n      <RecipeTable\n        recipes={recipes}\n        editingId={editingId}\n        setEditingId={setEditingId}\n        editedRecipe={editedRecipe}\n        setEditedRecipe={setEditedRecipe}\n        fetchRecipe={fetchRecipe}\n        ingredientsList={inventoryList}\n      />\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}